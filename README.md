

#### рзз. ЁЯЪА Express.js-ржПрж░ ржкржжрзНржзрждрж┐ (Traditional Server)

Express.js рж╣рж▓рзЛ ржПржХржЯрж┐ ржРрждрж┐рж╣рзНржпржмрж╛рж╣рзА рж╕рж╛рж░рзНржнрж╛рж░-рж╕рж╛ржЗржб ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиред

* **рж╕рзНржерж╛ржпрж╝рж┐рждрзНржм (Persistence):** ржпржЦржи ржЖржкржирж┐ `node server.js` ржжрж┐ржпрж╝рзЗ ржЖржкржирж╛рж░ Express рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рж╛ржи, рждржЦржи ржПржЯрж┐ ржПржХржЯрж┐ **ржжрзАрж░рзНржШрж╕рзНржерж╛ржпрж╝рзА (long-running) ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛** рж╣рж┐рж╕рзЗржмрзЗ ржорзЗржорж░рж┐рждрзЗ ржЪрж╛рж▓рзБ ржерж╛ржХрзЗред
* **рж╕ржВржпрзЛржЧ (Connection):** ржЖржкржирж┐ рж╕рж╛рж░рзНржнрж╛рж░ рж╢рзБрж░рзБ рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ ржПржХржмрж╛рж░ржЗ MongoDB-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рзЗржи (ржпрзЗржоржи: `server.listen(port)`-ржПрж░ ржЖржЧрзЗ)ред ржПржЗ **ржПржХржХ рж╕ржВржпрзЛржЧ (single connection)** ржЯрж┐ржЗ рж╕рж╛рж░рзНржнрж╛рж░ ржмржирзНржз ржирж╛ рж╣ржУржпрж╝рж╛ ржкрж░рзНржпржирзНржд рж╕ржХрж▓ ржЕржирзБрж░рзЛржз (requests) рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рзЗред
* **рж╕рзБржмрж┐ржзрж╛:** ржПржЯрж┐ ржЦрзБржм рж╕рж╣ржЬ ржПржмржВ ржжржХрзНрж╖ред ржХрж╛рж░ржг ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рждрзЗ ржпрзЗ рж╕ржоржпрж╝ рж▓рж╛ржЧрзЗ, рждрж╛ рж╢рзБржзрзБ ржПржХржмрж╛рж░ржЗ рж▓рж╛ржЧрзЗред

#### рзи. тШБя╕П Next.js-ржПрж░ ржкржжрзНржзрждрж┐ (Serverless/Function-as-a-Service)

Next.js ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи (ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ API Routes ржмрж╛ App Router-ржПрж░ Route Handlers) рж╕рж╛ржзрж╛рж░ржгржд **рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржлрж╛ржВрж╢ржи (Serverless Functions)** рж╣рж┐рж╕рзЗржмрзЗ ржбрзЗржкрзНрж▓рзЯ рж╣ржпрж╝ (ржпрзЗржоржи Vercel, AWS Lambda-рждрзЗ)ред

* **рж╕рзНржХрзЗрж▓рж┐ржВ ржЯрзБ ржЬрж┐рж░рзЛ (Scale to Zero):** рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░рзЗ, ржпржЦржи ржХрзЛржирзЛ ржЯрзНрж░рзНржпрж╛ржлрж┐ржХ ржмрж╛ ржЕржирзБрж░рзЛржз ржерж╛ржХрзЗ ржирж╛, рждржЦржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ рждрж╛рж░ **ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕рзЗрж░ рж╕ржВржЦрзНржпрж╛ рж╢рзВржирзНржпрзЗ ржирж╛ржорж┐ржпрж╝рзЗ ржЖржирзЗ** (рж╕рзНржХрзЗрж▓ ржЯрзБ ржЬрж┐рж░рзЛ)ред ржПрждрзЗ ржЦрж░ржЪ ржмрж╛ржБржЪрзЗред
* **ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ "ржЬрзЗржЧрзЗ ржУржарж╛" (Waking Up):** ржпржЦржиржЗ ржПржХржЯрж┐ ржирждрзБржи ржЕржирзБрж░рзЛржз ржЖрж╕рзЗ, рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо ржжрзНрж░рзБржд ржПржХржЯрж┐ ржирждрзБржи ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ рждрзИрж░рж┐ ржХрж░рзЗ (ржмрж╛ 'рж╣ржЯ' ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ)ред ржПржЗ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржХрзЗ **ржХрзЛрж▓рзНржб рж╕рзНржЯрж╛рж░рзНржЯ (Cold Start)** ржмрж▓рзЗред ржПржЗ рж╕ржоржпрж╝рзЗржЗ ржЖржкржирж╛рж░ ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕ржВржпрзЛржЧрзЗрж░ ржХрзЛржбржЯрж┐ ржЖржмрж╛рж░ ржЪрж▓рждрзЗ рж╢рзБрж░рзБ ржХрж░рзЗред
* **ржмрж┐ржкржж:** ржпржжрж┐ ржПржХржЗ рж╕ржоржпрж╝рзЗ рззрзжрзж ржЬржи ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЕржирзБрж░рзЛржз ржкрж╛ржарж╛ржи, рждржмрзЗ ржЖржкржирж╛рж░ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо **рззрзжрзжржЯрж┐ ржнрж┐ржирзНржи ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ ржмрж╛ ржлрж╛ржВрж╢ржи ржПржХрзНрж╕рж┐ржХрж┐ржЙрж╢ржи** рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПрж░ ржорж╛ржирзЗ, ржбрж╛ржЯрж╛ржмрзЗрж╕ ржХрж╛ржирзЗржХрж╢ржирзЗрж░ ржХрзЛржбржЯрж┐ **ржПржХржмрж╛рж░ ржиржпрж╝, рззрзжрзж ржмрж╛рж░** ржЪрж▓рждрзЗ ржкрж╛рж░рзЗ!

### рзй. ЁЯТб рж╕ржорж╛ржзрж╛ржи: рж╕рж┐ржЩрзНржЧрзЗрж▓ржЯржи ржкрзНржпрж╛ржЯрж╛рж░рзНржи (Singleton Pattern)

ржПржЗ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЬржирзНржп ржЖржкржирж╛рж░ ржкрзНрж░рж╕рзНрждрж╛ржмрж┐ржд **рж╕рж┐ржЩрзНржЧрзЗрж▓ржЯржи ржкрзНржпрж╛ржЯрж╛рж░рзНржи** (Singleton Pattern) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЕрждрзНржпрж╛ржмрж╢рзНржпржХред

* **рж╕рж┐ржЩрзНржЧрзЗрж▓ржЯржи ржХрзА?** ржПржЯрж┐ ржПржоржи ржПржХржЯрж┐ ржбрж┐ржЬрж╛ржЗржи ржкрзНржпрж╛ржЯрж╛рж░рзНржи ржпрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕рзЗрж░ **ржПржХржЯрж┐ ржорж╛рждрзНрж░ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕** рждрзИрж░рж┐ рж╣ржмрзЗред
* **ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ:** ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржорзЗржорж░рж┐ рж╕рзНржкрзЗрж╕рзЗ **рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржЯрж┐ MongoDB рж╕ржВржпрзЛржЧ (connection instance)** рждрзИрж░рж┐ рж╣ржпрж╝рзЗржЫрзЗред

#### рж╕рж┐ржЩрзНржЧрзЗрж▓ржЯржи ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ (Next.js-ржПрж░ ржЬржирзНржп)

1. **ржЧрзНрж▓рзЛржмрж╛рж▓ ржЪрзЗржХрж┐ржВ:** ржЖржорж░рж╛ ржПржХржЯрж┐ ржЧрзНрж▓рзЛржмрж╛рж▓ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓ (ржпрзЗржоржи Node.js-ржПрж░ `$global` ржЕржмржЬрзЗржХрзНржЯ) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред
2. **рж╕ржВрж░ржХрзНрж╖ржг (Storage):** ржкрзНрж░ржержоржмрж╛рж░ ржпржЦржи ржПржХржЯрж┐ ржЕржирзБрж░рзЛржз ржЖрж╕рзЗ ржПржмржВ ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕ржВржпрзЛржЧ рждрзИрж░рж┐ рж╣ржпрж╝, ржЖржорж░рж╛ рж╕рзЗржЗ рж╕ржВржпрзЛржЧрзЗрж░ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ржЯрж┐ ржЧрзНрж▓рзЛржмрж╛рж▓ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓рзЗ **рж╕ржВрж░ржХрзНрж╖ржг** ржХрж░рж┐ред
3. **ржкрзБржиржГржмрзНржпржмрж╣рж╛рж░ (Re-use):** ржкрж░ржмрж░рзНрждрзА ржЕржирзБрж░рзЛржзржЧрзБрж▓рж┐ ржЖрж╕рж╛рж░ рж╕ржоржпрж╝, рж╕ржВржпрзЛржЧ рждрзИрж░рж┐рж░ ржЖржЧрзЗ ржЖржорж░рж╛ ржкрзНрж░ржержорзЗ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж┐: "ржЧрзНрж▓рзЛржмрж╛рж▓ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржмрж▓рзЗ ржХрж┐ ржЗрждрж┐ржоржзрзНржпрзЗржЗ ржПржХржЯрж┐ рж╕ржВржпрзЛржЧ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ ржЖржЫрзЗ?"
* **ржпржжрж┐ ржерж╛ржХрзЗ:** рждржмрзЗ ржирждрзБржи рж╕ржВржпрзЛржЧ ржирж╛ ржХрж░рзЗ, ржЖржорж░рж╛ рж╕рзЗржЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд **ржкрзБрж░рзЛржирзЛ рж╕ржВржпрзЛржЧржЯрж┐ржЗ ржлрзЗрж░ржд ржжрзЗржЗ (return)** ржПржмржВ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред
* **ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ:** рждржмрзЗржЗ ржХрзЗржмрж▓ ржПржХржЯрж┐ **ржирждрзБржи рж╕ржВржпрзЛржЧ** рждрзИрж░рж┐ ржХрж░рж┐ред



ржПрж░ ржлрж▓рзЗ, ржПржХржЯрж┐ ржПржХржХ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕рзЗрж░ ржЬрзАржмржиржЪржХрзНрж░ ржЬрзБржбрж╝рзЗ ржЖржкржирж╛рж░ MongoDB-ржПрж░ рж╕рж╛ржерзЗ **ржПржХржЯрж┐ ржорж╛рждрзНрж░ ржХрж╛рж░рзНржпржХрж░ рж╕ржВржпрзЛржЧ** ржмржЬрж╛ржпрж╝ ржерж╛ржХрзЗ, ржпрж╛ ржПржХрж╕рж╛ржерзЗ рж╣рж╛ржЬрж╛рж░ рж╣рж╛ржЬрж╛рж░ рж╕ржВржпрзЛржЧ ржЦрзЛрж▓рж╛рж░ (connection flooding) рж╣рж╛ржд ржерзЗржХрзЗ ржЖржкржирж╛рж░ ржбрж╛ржЯрж╛ржмрзЗрж╕ржХрзЗ рж░ржХрзНрж╖рж╛ ржХрж░рзЗред
